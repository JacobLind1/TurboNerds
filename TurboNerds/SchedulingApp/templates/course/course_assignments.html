{% extends 'base.html' %}

{% load static %}

{% block content %}

  {% block css %}
    <link rel="stylesheet" href={% static 'course_info.css' %}>
  {% endblock %}

  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Courses with Labs and Sections</title>
  </head>
  <h1>Course Information</h1>
  <div class="container">
    {% if courses %}
        <form method="post" action="{% url 'course_assignment' %}" novalidate>{% csrf_token %}
        {% if add == 'add' %}
            <div class="form-container">
                <div class="entries">
                    {% for field in form %}
                        <div class="entry">
                            {{ field }}
                        </div>
                    {% endfor %}
                    <button name="save">Save</button>
                    <a href="/home/"><button>Cancel</button></a>
                </div>
            </div>
        {% else %}
            <button name="add">Add Course</button>
        {% endif %}
        </form>
      {% for course in courses %}
          <h2>{{ course.name }} ({{ course.department }} {{ course.number }})</h2>
          <div class="remove">
            <a id="delete" href="{% url 'delete_course' course.name %}">Delete</a>
          </div>
          {% if course.lab_set.all %}
            <h3>Labs:</h3>
            <table>
              <tr>
                <th>TA</th>
                <th>Lab section</th>
                <th>Times</th>
                <th>Days</th>
              </tr>
              {% for lab in course.lab_set.all %}
                <tr>
                  <td>{{ lab.assistant.first_name }} {{ lab.assistant.last_name }}</td>
                  <td>{{ lab.lab_name }}</td>
                  <td>{{ lab.start_time }} - {{ lab.end_time }}</td>
                  <td>{{ lab.days }}</td>
                </tr>
              {% endfor %}
            </table>
          {% else %}
            <p class="none">No labs at this time.</p>
          {% endif %}

          {% if course.section_set.all %}

            <table>
              <h3>Sections:</h3>
              <tr>
                <th>Instructor</th>
                <th>Start/End</th>
                <th>Times</th>
                <th>Days</th>
              </tr>
              {% for section in course.section_set.all %}
                <tr>
                  <td>{{ section.instructor.get_full_name }}</td>
                  <td>{{ section.start_date }} - {{ section.end_date }}</td>
                  <td>Start Time: {{ section.start_time }} - {{ section.end_time }}</td>
                  <td>{{ section.days }}</td>
                </tr>
              {% endfor %}
            </table>
          {% else %}
            <p class="none">No sections at this time.</p>
          {% endif %}
          <br>
      {% endfor %}
    {% else %}
      <h2>No courses at this time.</h2>
    {% endif %}
  </div>
{% endblock %}



